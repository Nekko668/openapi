import{_ as t,c as e,o as l,a6 as n}from"./chunks/framework.Dgb-pK-G.js";const f=JSON.parse('{"title":"接口说明","description":"","frontmatter":{},"headers":[],"relativePath":"docs/apis/接口说明.md","filePath":"docs/apis/接口说明.md","lastUpdated":1715571097000}'),a={name:"docs/apis/接口说明.md"},d=n(`<h1 id="接口说明" tabindex="-1"><strong>接口说明</strong> <a class="header-anchor" href="#接口说明" aria-label="Permalink to &quot;**接口说明**&quot;">​</a></h1><h2 id="版本信息" tabindex="-1"><strong>版本信息</strong> <a class="header-anchor" href="#版本信息" aria-label="Permalink to &quot;**版本信息**&quot;">​</a></h2><p><code>北京网动网络科技股份有限公司 2022年09月02日</code></p><table><thead><tr><th style="text-align:center;"><strong>版本编号</strong></th><th style="text-align:center;"><strong>完成日期</strong></th><th style="text-align:center;"><strong>编写人</strong></th><th style="text-align:center;"><strong>审核人</strong></th><th style="text-align:center;"><strong>批准人</strong></th><th style="text-align:center;"><strong>修改说明</strong></th></tr></thead><tbody><tr><td style="text-align:center;">V1.0</td><td style="text-align:center;">2022-9-4</td><td style="text-align:center;">聂维伟</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">V1.1</td><td style="text-align:center;">2023-6-14</td><td style="text-align:center;">聂维伟</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr><tr><td style="text-align:center;">V1.2</td><td style="text-align:center;">2023-08-18</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">1.添加创建/修改/删除用户<br>2.添加创建/修改/删除组织部门</td></tr><tr><td style="text-align:center;">V1.2</td><td style="text-align:center;">2023-08-23</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">添加批量创建用户</td></tr><tr><td style="text-align:center;">V1.3</td><td style="text-align:center;">2023-08-28</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">1.查看会议列表添加会议状态<br>2.添加获取录像信息接口</td></tr><tr><td style="text-align:center;">V1.4</td><td style="text-align:center;">2023-09-04</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">1. 添加设置会议室视频模板<br>2. 添加获取会议室视频模板<br>3. 添加获取推流通道</td></tr><tr><td style="text-align:center;">V1.5</td><td style="text-align:center;">2023-09-05</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">添加获取邀请会议的Token</td></tr><tr><td style="text-align:center;">V1.6</td><td style="text-align:center;">2023-09-08</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">设置用户查看模板</td></tr><tr><td style="text-align:center;">V1.7</td><td style="text-align:center;">2023-09-10</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">新增会议室授权用户</td></tr><tr><td style="text-align:center;">V1.8</td><td style="text-align:center;">2023-09-12</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">会议列表增加排序字段</td></tr><tr><td style="text-align:center;">V1.9</td><td style="text-align:center;">2023-11-8</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">呼叫加入视频调度支持指定slaver</td></tr><tr><td style="text-align:center;">V2.0</td><td style="text-align:center;">2023-11-23</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">发起调度新增语音轮询参数</td></tr><tr><td style="text-align:center;">V2.1</td><td style="text-align:center;">2023-11-28</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">发起调度添加会议字幕参数,查询会议详情添加用户序列返回</td></tr><tr><td style="text-align:center;">V2.1</td><td style="text-align:center;">2024-1-24</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">会议室详情添加在线人数,查询会议室列表添加会议状态参数</td></tr><tr><td style="text-align:center;">V2.2</td><td style="text-align:center;">2024-3-6</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">会议详情显示匿名用户</td></tr><tr><td style="text-align:center;"></td><td style="text-align:center;">2024-4-17</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">修改订阅的设备/用户的位置消息</td></tr><tr><td style="text-align:center;"></td><td style="text-align:center;">2024-4-30</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;">修改获取设备信息返回在会状态</td></tr></tbody></table><h2 id="接口规范" tabindex="-1"><strong>接口规范</strong> <a class="header-anchor" href="#接口规范" aria-label="Permalink to &quot;**接口规范**&quot;">​</a></h2><h3 id="版本控制" tabindex="-1"><strong>版本控制</strong> <a class="header-anchor" href="#版本控制" aria-label="Permalink to &quot;**版本控制**&quot;">​</a></h3><p>为了便于后期接口的升级和维护，建议在接口路径中加入版本号，便于管理，实现接口多版本的可维护性。</p><h3 id="格式规范如下" tabindex="-1"><strong>格式规范如下：</strong> <a class="header-anchor" href="#格式规范如下" aria-label="Permalink to &quot;**格式规范如下：**&quot;">​</a></h3><p><code>/xx/v1/xx</code></p><p>更新版本后可以使用v2、v3等、依次递加。</p><h3 id="请求公共参数规范" tabindex="-1"><strong>请求公共参数规范</strong> <a class="header-anchor" href="#请求公共参数规范" aria-label="Permalink to &quot;**请求公共参数规范**&quot;">​</a></h3><p>协议支持 <code>http/https</code> 请求方式支持 <code>POST</code> 参数格式 <code>data=xxx &amp;timestamp=xxx &amp;access_token=xxxx&amp;sign=xxxx</code></p><table><thead><tr><th style="text-align:left;">参数名</th><th style="text-align:left;">类型</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">data</td><td style="text-align:left;">String</td><td style="text-align:left;">请求命令参数，为JSON格式命令参数进行base64的数据，data=Base64(json_param)</td></tr><tr><td style="text-align:left;">timestamp</td><td style="text-align:left;">Long</td><td style="text-align:left;">时间戳</td></tr><tr><td style="text-align:left;">access_token</td><td style="text-align:left;">String</td><td style="text-align:left;">访问的token</td></tr><tr><td style="text-align:left;">sign</td><td style="text-align:left;">String</td><td style="text-align:left;">签名</td></tr></tbody></table><h3 id="签名算法" tabindex="-1"><strong>签名算法</strong> <a class="header-anchor" href="#签名算法" aria-label="Permalink to &quot;**签名算法**&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>// 示例参数</span></span>
<span class="line"><span>param = { </span></span>
<span class="line"><span> &quot;room_id&quot;: 2,</span></span>
<span class="line"><span>}</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 将param进行Base64编码</span></span>
<span class="line"><span>param_base64 = encodeURIComponent(base64(param))</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 对参数进行签名</span></span>
<span class="line"><span>// 对拼接参数进行MD5</span></span>
<span class="line"><span>sign_md5 = MD5(access_token + param_base64 + timestamp)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 用appkey对MD5的数据进行HmacSHA1</span></span>
<span class="line"><span>sign_sha = encodeURIComponent(base64(HmacSHA1(sign_md5, appkey)))</span></span>
<span class="line"><span></span></span>
<span class="line"><span>POST </span></span>
<span class="line"><span>https://[server:port]/openapi/v1/rooms/close</span></span>
<span class="line"><span>access_token = &#39;xxxx&amp;data=param_base64&amp;timestamp=1529223702&amp;sign=sign_sha&#39;</span></span></code></pre></div><p>如请求的 JSON参数为：</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;auth_user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;auth_password&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot; 8DDF878039B70767C4A5BCF4F0C4F65E&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;user_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="公共参数名说明" tabindex="-1"><strong>公共参数名说明</strong> <a class="header-anchor" href="#公共参数名说明" aria-label="Permalink to &quot;**公共参数名说明**&quot;">​</a></h3><table><thead><tr><th style="text-align:left;">参数说明</th><th style="text-align:left;">参数名</th><th style="text-align:left;">类型</th></tr></thead><tbody><tr><td style="text-align:left;">认证用户名</td><td style="text-align:left;">auth_user</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">认证用户密码</td><td style="text-align:left;">auth_password</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">部门ID</td><td style="text-align:left;">department_id</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">部门名称</td><td style="text-align:left;">department_name</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">部门的父ID</td><td style="text-align:left;">department_parent_id</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">部门序列 （第三方同步时的唯一标识）</td><td style="text-align:left;">department_serial</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">部门父序列</td><td style="text-align:left;">department_parent_Serial</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">用户帐号</td><td style="text-align:left;">user_name</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">帐号类型（网动终端 h23终端 sip终端 rtsp）</td><td style="text-align:left;">user_type</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">用户密码</td><td style="text-align:left;">user_password</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">用户ID</td><td style="text-align:left;">user_id</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">用户在会议室的角色</td><td style="text-align:left;">user_role</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">用户昵称</td><td style="text-align:left;">user_nickname</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">用户姓名</td><td style="text-align:left;">user_true_name</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">用户级别</td><td style="text-align:left;">user_grade</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">用户手机号</td><td style="text-align:left;">user_phone</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">用户邮箱</td><td style="text-align:left;">user_email</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">用户序列（第三方同步时的唯一标识）</td><td style="text-align:left;">user_serial</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">会议室号</td><td style="text-align:left;">room_id</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">会议室名</td><td style="text-align:left;">room_name</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">会议室密码</td><td style="text-align:left;">room_password</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">目录ID</td><td style="text-align:left;">catalog_id</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">目录名</td><td style="text-align:left;">catalog_name</td><td style="text-align:left;">String</td></tr><tr><td style="text-align:left;">目录的父ID</td><td style="text-align:left;">catalog _parent_id</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">匿名</td><td style="text-align:left;">anonymous</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">创建时间</td><td style="text-align:left;">create_time</td><td style="text-align:left;">Datetime</td></tr><tr><td style="text-align:left;">开始时间</td><td style="text-align:left;">start_time</td><td style="text-align:left;">Datetime</td></tr><tr><td style="text-align:left;">结束时间</td><td style="text-align:left;">end_time</td><td style="text-align:left;">Datetime</td></tr><tr><td style="text-align:left;">有效期</td><td style="text-align:left;">expired_time</td><td style="text-align:left;">Datetime</td></tr><tr><td style="text-align:left;">分页下载时每页行数</td><td style="text-align:left;">row_count</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">分页下载时第几页</td><td style="text-align:left;">page_index</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">分页下载时总页数</td><td style="text-align:left;">page_count</td><td style="text-align:left;">Int</td></tr></tbody></table><h3 id="错误号-error-code-说明" tabindex="-1"><strong>错误号 (error_code) 说明</strong> <a class="header-anchor" href="#错误号-error-code-说明" aria-label="Permalink to &quot;**错误号 (error_code) 说明**&quot;">​</a></h3><p>公共返回参数如下，其余返回参数由各个API自行定义。<br> 返回码总体说明：<br><code>error_code = 200</code> ：返回成功<br><code>1000 &lt; error_code &lt; 2000</code> : 接口调用不能通过认证<br><code>2000 &lt; error_code &lt; 5000</code> : 调用API时发生错误，需要开发者进行相应的处理<br><code>error_code &gt; 5000</code> : 系统内部错误，请联系技术支持，调查问题原因并获得解决方案</p><table><thead><tr><th style="text-align:left;">错误号</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">1001</td><td style="text-align:left;">请求参数非法。不合法的原因可以参看接口说明中关于该参数的解释</td></tr><tr><td style="text-align:left;">1002</td><td style="text-align:left;">请求无签名</td></tr><tr><td style="text-align:left;">1003</td><td style="text-align:left;">请求已超时</td></tr><tr><td style="text-align:left;">1004</td><td style="text-align:left;">签名校验失败</td></tr><tr><td style="text-align:left;">1005</td><td style="text-align:left;">认证账号或者密码错误</td></tr><tr><td style="text-align:left;">1006</td><td style="text-align:left;">无操作权限</td></tr><tr><td style="text-align:left;">1007</td><td style="text-align:left;">Data Json数据解析出错</td></tr><tr><td style="text-align:left;">5001</td><td style="text-align:left;">服务器出现异常</td></tr><tr><td style="text-align:left;">5002</td><td style="text-align:left;">请求失败</td></tr><tr><td style="text-align:left;">2001</td><td style="text-align:left;">查询不到归属的部门</td></tr><tr><td style="text-align:left;">2002</td><td style="text-align:left;">用户账号已存在</td></tr><tr><td style="text-align:left;">2003</td><td style="text-align:left;">用户账号不存在</td></tr><tr><td style="text-align:left;">2004</td><td style="text-align:left;">用户序列，请加上公司代码  例如：12345@wd</td></tr><tr><td style="text-align:left;">2005</td><td style="text-align:left;">部门序列或者部门id不能为空</td></tr><tr><td style="text-align:left;">2006</td><td style="text-align:left;">查询不到数据</td></tr><tr><td style="text-align:left;">2007</td><td style="text-align:left;">会议时间出错</td></tr><tr><td style="text-align:left;">2008</td><td style="text-align:left;">匿名/公开会议室密码不能为空</td></tr></tbody></table>`,22),s=[d];function i(r,g,x,y,c,o){return l(),e("div",null,s)}const h=t(a,[["render",i]]);export{f as __pageData,h as default};
